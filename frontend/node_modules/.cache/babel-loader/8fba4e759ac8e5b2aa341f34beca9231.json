{"ast":null,"code":"import _classCallCheck from\"/Users/dmitrii/react-mesto-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dmitrii/react-mesto-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";/* eslint-disable no-useless-concat */export var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl;_classCallCheck(this,Api);this._baseUrl=baseUrl;}_createClass(Api,[{key:\"getInitialCards\",value:function getInitialCards(){return fetch(this._baseUrl+\"cards\",{method:\"GET\",headers:this.headers(),credentials:'include'}).then(this._handleResOk);}},{key:\"addCards\",value:function addCards(data){return fetch(this._baseUrl+\"cards\",{method:\"POST\",headers:this.headers(),credentials:'include',body:JSON.stringify({name:data.name,link:data.link})}).then(this._handleResOk);}},{key:\"addUserId\",value:function addUserId(data){return fetch(this._baseUrl+\"users\"+\"/\"+\"me\",{method:\"PATCH\",headers:this.headers(),credentials:'include',body:JSON.stringify({name:data.name,about:data.about})}).then(this._handleResOk);}},{key:\"getUserId\",value:function getUserId(){return fetch(this._baseUrl+\"users\"+\"/\"+\"me\",{method:\"GET\",headers:this.headers(),credentials:'include'}).then(this._handleResOk);}},{key:\"addAvatarId\",value:function addAvatarId(data){return fetch(this._baseUrl+\"users\"+\"/\"+\"me\"+\"/\"+\"avatar\",{method:\"PATCH\",headers:this.headers(),credentials:'include',body:JSON.stringify({avatar:data.avatar})}).then(this._handleResOk);}},{key:\"getAllNeededData\",value:function getAllNeededData(){return Promise.all([this.getInitialCards(),this.getUserId()]);}},{key:\"deleteCard\",value:function deleteCard(_id){return fetch(this._baseUrl+\"cards/\"+_id,{method:\"DELETE\",headers:this.headers(),credentials:'include'}).then(this._handleResOk);}},{key:\"likeCard\",value:function likeCard(_id,like){// console.log(isLiked)\nreturn fetch(\"\".concat(this._baseUrl,\"cards/\").concat(_id,\"/likes\"),{method:like?\"PUT\":\"DELETE\",headers:this.headers(),credentials:'include'}).then(this._handleResOk);}},{key:\"signin\",value:function signin(body){return fetch(\"\".concat(this._baseUrl,\"signin\"),{method:'POST',headers:this.headers(),credentials:'include',body:JSON.stringify(body)}).then(this._handleResOk);}},{key:\"signup\",value:function signup(body){return fetch(\"\".concat(this._baseUrl,\"signup\"),{method:'POST',headers:this.headers(),credentials:'include',body:JSON.stringify(body)}).then(this._handleResOk);}},{key:\"_handleResOk\",value:function _handleResOk(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"headers\",value:function headers(){return{authorization:\"Bearer \".concat(localStorage.getItem('token')),\"Content-Type\":\"application/json\"};}}]);return Api;}();var api=new Api({baseUrl:\"//localhost:3001/\"});export default api;","map":{"version":3,"sources":["/Users/dmitrii/react-mesto-api-full/frontend/src/utils/api.js"],"names":["Api","baseUrl","_baseUrl","fetch","method","headers","credentials","then","_handleResOk","data","body","JSON","stringify","name","link","about","avatar","Promise","all","getInitialCards","getUserId","_id","like","res","ok","json","reject","status","authorization","localStorage","getItem","api"],"mappings":"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","sourcesContent":["/* eslint-disable no-useless-concat */\nexport class Api {\n  constructor({ baseUrl}) {\n    this._baseUrl = baseUrl;\n    \n\n  }\n\n  getInitialCards() {\n    return fetch(this._baseUrl + \"cards\", {\n      method: \"GET\",\n      headers: this.headers(),\n      credentials: 'include',\n    }).then(this._handleResOk);\n  }\n\n  addCards(data) {\n    return fetch(this._baseUrl + \"cards\", {\n      method: \"POST\",\n      headers: this.headers(),\n      credentials: 'include',\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link,\n      }),\n    }).then(this._handleResOk);\n  }\n\n  addUserId(data) {\n    return fetch(this._baseUrl + \"users\" + \"/\" + \"me\", {\n      method: \"PATCH\",\n      headers: this.headers(),\n      credentials: 'include',\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      }),\n    }).then(this._handleResOk);\n  }\n\n  getUserId() {\n    return fetch(this._baseUrl + \"users\" + \"/\" + \"me\", {\n      method: \"GET\",\n      headers: this.headers(),\n      credentials: 'include',\n    }).then(this._handleResOk);\n  }\n\n  addAvatarId(data) {\n    return fetch(this._baseUrl + \"users\" + \"/\" + \"me\" + \"/\" + \"avatar\", {\n      method: \"PATCH\",\n      headers: this.headers(),\n      credentials: 'include',\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    }).then(this._handleResOk);\n  }\n\n  getAllNeededData() {\n    return Promise.all([this.getInitialCards(), this.getUserId()]);\n  }\n\n  deleteCard(_id) {\n    return fetch(this._baseUrl + \"cards/\" + _id, {\n      method: \"DELETE\",\n      headers: this.headers(),\n      credentials: 'include',\n    }).then(this._handleResOk);\n  }\n\n  likeCard(_id, like) {\n    // console.log(isLiked)\n    return fetch(`${this._baseUrl}cards/${_id}/likes`, {\n      method: like ? \"PUT\" : \"DELETE\",\n      headers: this.headers(),\n      credentials: 'include',\n      \n    }).then(this._handleResOk);\n    \n  }\n\nsignin(body) {\n  return fetch(`${this._baseUrl}signin`, {\n    method: 'POST',\n    headers: this.headers(),\n    credentials: 'include',\n    body: JSON.stringify(body)\n    \n  }).then(this._handleResOk);\n  \n}\nsignup(body) {\n  return fetch(`${this._baseUrl}signup`, {\n    method: 'POST',\n    headers: this.headers(),\n    credentials: 'include',\n    body: JSON.stringify(body)\n    \n  }).then(this._handleResOk);\n  \n}\n  _handleResOk(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n  headers(){\n    return  {\n      authorization: `Bearer ${localStorage.getItem('token')}`,\n      \"Content-Type\": \"application/json\",\n    }\n  }\n}\n\nconst api = new Api({\n  baseUrl: \"//localhost:3001/\",\n \n});\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}